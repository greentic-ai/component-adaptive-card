{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Adaptive Card invocation v1",
  "type": "object",
  "required": ["card_spec"],
  "properties": {
    "card_source": {
      "type": "string",
      "enum": ["inline", "asset", "catalog"],
      "default": "inline"
    },
    "card_spec": {
      "type": "object",
      "properties": {
        "inline_json": { "type": ["object", "array"] },
        "asset_path": { "type": "string" },
        "catalog_name": { "type": "string" },
        "template_params": { "type": ["object", "array"] },
        "asset_registry": {
          "type": "object",
          "additionalProperties": { "type": "string" }
        }
      }
    },
    "node_id": { "type": "string" },
    "payload": {
      "type": ["object", "array", "null"]
    },
    "session": {
      "type": ["object", "array", "null"]
    },
    "state": {
      "type": ["object", "array", "null"]
    },
    "interaction": {
      "type": "object",
      "required": ["interaction_type", "action_id", "card_instance_id"],
      "properties": {
        "enabled": { "type": "boolean" },
        "interaction_type": {
          "type": "string",
          "enum": ["Submit", "Execute", "OpenUrl", "ShowCard", "ToggleVisibility"]
        },
        "action_id": { "type": "string" },
        "verb": { "type": ["string", "null"] },
        "raw_inputs": { "type": ["object", "array", "string", "null"] },
        "card_instance_id": { "type": "string" },
        "metadata": { "type": ["object", "array", "null"] }
      }
    },
    "mode": {
      "type": "string",
      "enum": ["render", "validate", "renderAndValidate"],
      "default": "renderAndValidate"
    },
    "validation_mode": {
      "type": "string",
      "enum": ["off", "warn", "error"],
      "default": "warn"
    },
    "envelope": {
      "type": "object"
    }
  }
}
