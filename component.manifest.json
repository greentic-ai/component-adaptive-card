{
  "$schema": "https://greentic-ai.github.io/greentic-component/schemas/v1/component.manifest.schema.json",
  "artifacts": {
    "component_wasm": "target/wasm32-wasip2/release/component_adaptive_card.wasm"
  },
  "capabilities": {
    "host": {
      "messaging": {
        "inbound": true,
        "outbound": true
      },
      "secrets": {
        "required": []
      },
      "state": {
        "delete": true,
        "read": true,
        "write": true
      },
      "telemetry": {
        "scope": "node"
      }
    },
    "wasi": {
      "clocks": true,
      "filesystem": {
        "mode": "read_only",
        "mounts": [
          {
            "guest_path": ".",
            "host_class": "cwd",
            "name": "workspace"
          }
        ]
      },
      "random": true
    }
  },
  "config_schema": {
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "additionalProperties": false,
    "properties": {
      "asset_base_path": {
        "default": "assets",
        "description": "Optional base path for resolving catalog or asset-backed cards.",
        "type": "string",
        "x-default-applied": true
      },
      "catalog_registry_file": {
        "description": "Optional path to a JSON map of catalog names to asset paths (fallback for env-based resolution).",
        "type": "string",
        "x-optional": true
      }
    },
    "title": "component-adaptive-card component configuration",
    "type": "object"
  },
  "default_operation": "card",
  "describe_export": "get-manifest",
  "dev_flows": {
    "custom": {
      "format": "flow-ir-json",
      "graph": {
        "description": "Guided config flow for ai.greentic.component-adaptive-card",
        "id": "ai.greentic.component-adaptive-card.custom",
        "kind": "component-config",
        "nodes": {
          "ask_config": {
            "questions": {
              "fields": [
                {
                  "default": "asset",
                  "id": "card_source",
                  "options": [
                    "asset",
                    "inline",
                    "catalog"
                  ],
                  "prompt": "Where does the Adaptive Card come from?",
                  "type": "enum"
                },
                {
                  "default": "assets/cards/incident.json",
                  "id": "asset_path",
                  "prompt": "Asset path (relative path or registry path)",
                  "required": true,
                  "show_if": {
                    "id": "card_source",
                    "equals": "asset"
                  },
                  "type": "string"
                },
                {
                  "default": {
                    "type": "AdaptiveCard",
                    "version": "1.3",
                    "body": [],
                    "actions": []
                  },
                  "id": "inline_json",
                  "prompt": "Paste the Adaptive Card JSON for inline mode",
                  "required": true,
                  "show_if": {
                    "id": "card_source",
                    "equals": "inline"
                  },
                  "type": "json"
                },
                {
                  "default": "default",
                  "id": "catalog_name",
                  "prompt": "Catalog name",
                  "required": true,
                  "show_if": {
                    "id": "card_source",
                    "equals": "catalog"
                  },
                  "type": "string"
                },
                {
                  "default": "incident_summary",
                  "id": "catalog_item",
                  "prompt": "Catalog item/template key",
                  "required": true,
                  "show_if": {
                    "id": "card_source",
                    "equals": "catalog"
                  },
                  "type": "string"
                },
                {
                  "default": {},
                  "id": "template_params",
                  "prompt": "Template params to inject into the card template (optional)",
                  "type": "json"
                },
                {
                  "default": false,
                  "id": "needs_interaction",
                  "prompt": "Does this card need user interaction (Submit/Execute actions)?",
                  "type": "boolean"
                },
                {
                  "default": "Submit",
                  "id": "interaction_type",
                  "options": [
                    "Submit",
                    "Execute"
                  ],
                  "prompt": "What kind of interaction should the placeholder use?",
                  "required": true,
                  "show_if": {
                    "id": "needs_interaction",
                    "equals": true
                  },
                  "type": "enum"
                },
                {
                  "default": "action-1",
                  "id": "action_id",
                  "prompt": "Action id (used for routing/handlers)?",
                  "required": true,
                  "show_if": {
                    "id": "needs_interaction",
                    "equals": true
                  },
                  "type": "string"
                },
                {
                  "default": "card-1",
                  "id": "card_instance_id",
                  "prompt": "Card instance id (unique identifier for this card)?",
                  "required": true,
                  "show_if": {
                    "id": "needs_interaction",
                    "equals": true
                  },
                  "type": "string"
                },
                {
                  "default": {},
                  "id": "raw_inputs",
                  "prompt": "Raw inputs placeholder (default empty)",
                  "show_if": {
                    "id": "needs_interaction",
                    "equals": true
                  },
                  "type": "json"
                },
                {
                  "default": "renderAndValidate",
                  "id": "mode",
                  "options": [
                    "render",
                    "validate",
                    "renderAndValidate"
                  ],
                  "prompt": "Whether to render, validate only, or both.",
                  "type": "enum"
                },
                {
                  "id": "node_id",
                  "prompt": "Optional node id used to scope persisted state and helper context.",
                  "type": "string"
                },
                {
                  "default": {},
                  "id": "payload",
                  "prompt": "Explicit input payload used for binding/expression resolution.",
                  "type": "json"
                },
                {
                  "default": {},
                  "id": "session",
                  "prompt": "Optional explicit session metadata (not injected by the runner).",
                  "type": "json"
                },
                {
                  "default": {},
                  "id": "state",
                  "prompt": "Optional explicit state override (persistent state uses state-store).",
                  "type": "json"
                },
                {
                  "default": {},
                  "id": "envelope",
                  "prompt": "Optional Greentic invocation envelope metadata.",
                  "type": "json"
                }
              ]
            },
            "routing": [
              {
                "to": "emit_config"
              }
            ]
          },
          "emit_config": {
            "template": "{\n  \"node_id\": \"component-adaptive-card\",\n  \"node\": {\n    \"card\": {\n      \"input\": {\n        \"card_source\": \"{{state.card_source}}\",\n        \"card_spec\": {{#ifEq state.card_source \"asset\"}}{\n          \"asset_path\": \"{{state.asset_path}}\",\n          \"template_params\": {{json state.template_params}}\n        }{{/ifEq}}{{#ifEq state.card_source \"inline\"}}{\n          \"inline_json\": {{json state.inline_json}},\n          \"template_params\": {{json state.template_params}}\n        }{{/ifEq}}{{#ifEq state.card_source \"catalog\"}}{\n          \"catalog_name\": \"{{state.catalog_name}}\",\n          \"catalog_item\": \"{{state.catalog_item}}\",\n          \"template_params\": {{json state.template_params}}\n        }{{/ifEq}},\n        \"mode\": \"{{state.mode}}\",\n        \"node_id\": \"{{state.node_id}}\",\n        \"payload\": {{json state.payload}},\n        \"session\": {{json state.session}},\n        \"state\": {{json state.state}},\n        \"envelope\": {{json state.envelope}}{{#if state.needs_interaction}},\n        \"interaction\": {\n          \"interaction_type\": \"{{state.interaction_type}}\",\n          \"action_id\": \"{{state.action_id}}\",\n          \"card_instance_id\": \"{{state.card_instance_id}}\",\n          \"raw_inputs\": {{json state.raw_inputs}}\n        }{{/if}}\n      }\n    },\n    \"routing\": [\n      { \"to\": \"NEXT_NODE_PLACEHOLDER\" }\n    ]\n  }\n}"
          }
        }
      }
    },
    "default": {
      "format": "flow-ir-json",
      "graph": {
        "description": "Default config flow for ai.greentic.component-adaptive-card",
        "id": "ai.greentic.component-adaptive-card.default",
        "kind": "component-config",
        "nodes": {
          "ask_config": {
            "questions": {
              "fields": [
                {
                  "default": "assets/cards/incident.json",
                  "example": "assets/cards/incident.json",
                  "id": "asset_path",
                  "prompt": "Where is the Adaptive Card asset (relative path or registry path)?",
                  "required": true,
                  "type": "string"
                },
                {
                  "default": false,
                  "id": "needs_interaction",
                  "prompt": "Does this card need user interaction (Submit/Execute actions)?",
                  "type": "boolean"
                },
                {
                  "default": "Submit",
                  "id": "interaction_type",
                  "options": [
                    "Submit",
                    "Execute"
                  ],
                  "prompt": "What kind of interaction should the placeholder use?",
                  "required": true,
                  "show_if": {
                    "id": "needs_interaction",
                    "equals": true
                  },
                  "type": "enum"
                },
                {
                  "default": "action-1",
                  "id": "action_id",
                  "prompt": "Action id (used for routing/handlers)?",
                  "required": true,
                  "show_if": {
                    "id": "needs_interaction",
                    "equals": true
                  },
                  "type": "string"
                },
                {
                  "default": "card-1",
                  "id": "card_instance_id",
                  "prompt": "Card instance id (unique identifier for this card)?",
                  "required": true,
                  "show_if": {
                    "id": "needs_interaction",
                    "equals": true
                  },
                  "type": "string"
                },
                {
                  "default": {},
                  "id": "raw_inputs",
                  "prompt": "Raw inputs placeholder (default empty)",
                  "show_if": {
                    "id": "needs_interaction",
                    "equals": true
                  },
                  "type": "json"
                }
              ]
            },
            "routing": [
              {
                "to": "emit_config"
              }
            ]
          },
          "emit_config": {
            "template": "{\n  \"node_id\": \"component-adaptive-card\",\n  \"node\": {\n    \"card\": {\n      \"input\": {\n        \"card_source\": \"asset\",\n        \"card_spec\": {\n          \"asset_path\": \"{{state.asset_path}}\",\n          \"template_params\": {}\n        },\n        \"mode\": \"renderAndValidate\"{{#if state.needs_interaction}},\n        \"interaction\": {\n          \"interaction_type\": \"{{state.interaction_type}}\",\n          \"action_id\": \"{{state.action_id}}\",\n          \"card_instance_id\": \"{{state.card_instance_id}}\",\n          \"raw_inputs\": {{json state.raw_inputs}}\n        }{{/if}}\n      }\n    },\n    \"routing\": [\n      { \"to\": \"NEXT_NODE_PLACEHOLDER\" }\n    ]\n  }\n}"
          }
        }
      }
    }
  },
  "hashes": {
    "component_wasm": "blake3:21191533af6932a448d88bbb5759f14b96bfcfbb3fa06118409ff47a99de0e48"
  },
  "id": "ai.greentic.component-adaptive-card",
  "limits": {
    "memory_mb": 128,
    "wall_time_ms": 1000
  },
  "name": "component-adaptive-card",
  "operations": [
    {
      "input_schema": {
        "$ref": "schemas/io/input.schema.json"
      },
      "name": "card",
      "output_schema": {
        "$ref": "schemas/io/output.schema.json"
      }
    }
  ],
  "profiles": {
    "default": "stateless",
    "supported": [
      "stateless"
    ]
  },
  "supports": [
    "messaging"
  ],
  "version": "0.1.2",
  "world": "greentic:component/component@0.5.0"
}
